# RichText Multiline

## Description

By default, hitting enter when inside a [`RichText`](https://github.com/WordPress/gutenberg/blob/trunk/packages/block-editor/src/components/rich-text/README.md) component, produces a line break by inserting a `<br>` tag. This behaviour can be changed, so that, hitting enter will produce a new paragraph.

This example demonstrated using a `RichText` component with multiple lines.

Note, sine WP 6.1, this method of adding multiple paragraphs to a `RichText` block has been depreciated in favour of using inner blocks. See [here](https://github.com/WordPress/gutenberg/blob/wp/6.1/packages/block-editor/src/components/rich-text/index.js#L119).

## In this code

**`richtext-multiline.php`**

- Registers the `myprefix/richtext-multiline` block.

**`richtext-multiline.index.js`**

- Imports the block metadata from `richtext-multiline.block.json`

- Imports the `edit` function from `richtext-multiline.edit.js`

- Imports the `save` function from `richtext-multiline.save.js`

- Registers the `myprefix/richtext-multiline` block.

**`richtext-multiline.edit.js`**

- Handles the block in the editor, adding a `RichText` which includes a `multiline` attribute.

**`richtext-multiline.save.js`**

- Returns the markup for the block, that is saved in the database.

**`richtext-multiline.block.json`**

- Adds the `content` attribute.

## Notes

### Multiline

When used with the `multiline` attribute, the `RichText` component uses its `tag` attribute as the outer-warper for the block, and the tag which is assigned to `multiline`, as the tag used for the multiple lines generated by hitting enters.

for example,

```
<RichText
  identifier="content"
  tagName="div"
  multiline="p"
  value={content}
  onChange={(value) => setAttributes({ content: value })}
  placeholder={__("Write a lineâ€¦", "textDomain")}
  {...blockProps}
/>
```

will use a `div` tag as block's outer-wrapper, and `p` tags for the multiple lines (in this case multiple paragraphs contained within the `div`).

The `multiline` tag must be added to the attribute definition within the `block.json` file (see below), _and_ the `RichText` component in the `edit` function (as above).

Note, the `edit` function can use a different outer-wrapper tag to the `save` function.

In this example, the `edit` function uses a `div` tag as the outer-wrapper, and allows multiple `p` tags within it. The `save` function uses a `section` tag as the outer-wrapper.

Hitting enter *without* `multiline` defined produces:

```
<!-- wp:myprefix/richtext-multiline -->
<section class="wp-block-myprefix-richtext-multiline">Line 1<br>Line 2</section>
<!-- /wp:myprefix/richtext-multiline -->
```

Hitting enter *with* `multiline` defined produces:

```
<!-- wp:myprefix/richtext-multiline -->
<section class="wp-block-myprefix-richtext-multiline"><p>Line 1</p><p>Line1 </p></section>
<!-- /wp:myprefix/richtext-multiline -->
```

### Attributes

For the basic usage of a `content` attribute see the [`richtext-basic`](../richtext-basic/) example.

The `richtext-multiline.block.json` defines the `content attribute with:

```
"attributes": {
  "content": {
    "type": "string",
    "default": "",
    "source": "html",
    "selector": "section",
    "multiline": "p"
  }
},
```

Note, here the `type` is set to `string`, so that the multiple paragraphs will be stored as a single string, which includes the `p` tags. `type` could be set to `array`, to store each paragraph as an array element. The `selector` used is the `section` tag, which is the outer-wrapper used in the `save` function (not the `div` tag used in the `edit` function). `multiline` defines which tag will be used for the multiple lines within the block, this should match the `multiline` attribute inside the `RichText` component in the `edit` function.

## Also see

When enter is hit in the middle of the text in a `RichText` block, the block can be made to split into two of the same type of block. Similarly, two adjacent instances of the same block can be made to merge into a single block using the delete, or backspace keys. For an example of split and merge behaviour, see [`richtext-split-merge`](../richtext-split-merge/).

For a basic example of how to use block attributes, see [`richtext-basic`](../richtext-basic/).

For the basic use of `RichText` see [documentation on GitHub](https://github.com/WordPress/gutenberg/blob/trunk/packages/block-editor/src/components/rich-text/README.md)

For the `multiline` depreciation notice, see the `RichText` code on [GitHub](https://github.com/WordPress/gutenberg/blob/wp/6.1/packages/block-editor/src/components/rich-text/index.js#L119).

## Uses

**PHP WP functions**

- [`register_block_type`](https://developer.wordpress.org/reference/functions/register_block_type/)

**PHP WP actions**

- [`init`](https://developer.wordpress.org/reference/hooks/init/)

**JS WP dependencies**

- [`@wordpress/i18n`](https://developer.wordpress.org/block-editor/reference-guides/packages/packages-i18n/)

  - `__`

- [`@wordpress/block-editor`](https://developer.wordpress.org/block-editor/reference-guides/packages/packages-block-editor/)

- [`@wordpress/blocks`](https://developer.wordpress.org/block-editor/reference-guides/packages/packages-blocks/)

  - `registerBlockType`

  - `useBlockProps`

  - `RichText`
